{"version":3,"file":"218.js","mappings":"sJACO,IAAMA,EAAkB,SAAAC,GAG3B,oBAF0B,IAARA,EAAe,IAEjC,iB,+JCFSC,EAAO,CAChBC,OAAQ,OACRC,MAAOC,EAAAA,QACPC,KAAM,I,urBCCH,IAAMC,EAAgB,SAAC,GAAc,IAAbC,EAAa,EAAbA,QACrBC,EAAU,CACZC,QAAS,CACLC,MAAO,CAAEC,KAAM,kBAAmBC,SAAS,EAAMX,KAAMA,GACvDY,WAAY,CAAEV,MAAOC,EAAAA,QAASH,KAAM,EAAF,GAAMA,KAE5Ca,YAAY,EACZC,qBAAqB,EACrBC,YAAa,EACbC,EAAG,CACCC,MAAO,CACHjB,KAAM,EAAF,GAAMA,MAKhBkB,EAAO,CACTC,OAAQb,EAAQc,KAAI,SAAAC,GAAK,OAAIA,EAAMC,QACnCC,SAAU,CAAC,CACPC,MAAO,QACPN,KAAMZ,EAAQc,KAAI,SAAAC,GAAK,OAAIA,EAAMI,SACjCC,gBAAiBpB,EAAQc,KAAI,SAAAC,GAAK,OAAIvB,EAAAA,EAAAA,GAAgBuB,EAAMtB,aAIpE,OAAO,SAAC,KAAD,CAAKQ,QAASA,EAASW,KAAMA,KC/BlCS,EAAiB,SAAAC,GAAM,OACzBC,WAAWC,KAAKC,IAAIH,GAAQI,QAAQ,KAE3BC,EAAiB,SAAAR,GAC1B,OAAc,IAAVA,EACO,uBAEP,UAAUE,EAAeF,GAAzB,kBAAyCA,EAAQ,EAAI,SAAW,SCFlElB,EAAU,CACZC,QAAS,CACLC,MAAO,CAAEC,KAAM,wCAAyCC,SAAS,EAAMX,KAAM,CAAEC,OAAQ,OAAQG,KAAM,KACrGQ,WAAY,CAAEV,MAAOC,EAAAA,QAAS+B,UAAWD,EAAgBjC,KAAMA,IAEnEa,YAAY,EACZC,qBAAqB,EACrBC,YAAa,EACboB,UAAW,IACXC,OAAQ,CACJC,EAAG,CACCpB,MAAO,CACHjB,KAAMA,IAGdgB,EAAG,CACCsB,cAAe,GACfC,aAAc,MAMbC,EAAsB,SAAC,GAAc,IAAblC,EAAa,EAAbA,QAC3BY,EAAO,CACTC,OAAQb,EAAQc,KAAI,SAAAC,GAAK,OAAIA,EAAMC,QACnCC,SAAU,CAAC,CACPC,MAAO,2DACPN,KAAMZ,EAAQc,KAAI,SAAAC,GAAK,OAAIA,EAAMoB,cACjCf,gBAAiBpB,EAAQc,KAAI,SAAAC,GAAK,OAAIA,EAAMoB,WAAa,EAAIC,EAAAA,KAAOC,EAAAA,YAI5E,OAAO,SAAC,KAAD,CAAKpC,QAASA,EAASW,KAAMA,KC5BxC0B,EAAAA,GAAAA,SACIC,EAAAA,GACAC,EAAAA,GACAC,EAAAA,GACAC,EAAAA,GACAC,EAAAA,EACAC,EAAAA,GCbJ,IAAMC,EAAsC,SAACC,EAAQC,GAAT,OAAoBvB,KAAKC,IAAIsB,EAAOZ,YAAcX,KAAKC,IAAIqB,EAAOX,aAEjGa,EAAc,SAAC,GAAc,IHMJ7B,EGL5BJ,EADgC,EAAbf,QACHiD,KAAKJ,GAAqC,GAEhE,OAAO,iBAAKK,UCPmE,SDOxE,WACH,4CAGA,iBAAKC,MCXsF,QDW3F,WACI,8EACqD,mDADrD,yHAIA,gGACyEpC,EAAMC,KAD/E,KACqF,6BHP3DG,EGO2FJ,EAAMoB,WHNrH,IAAVhB,EACO,uBAEP,UAAUA,EAAQ,EAAI,SAAW,OAAjC,YAA2CE,EAAeF,GAA1D,aGEI,QAGA,4FACmE,4BAASQ,EAAeH,KAAK4B,MAAyB,GAAnBrC,EAAMoB,eAD5G,yBEnBZ,QAAwI,SCKjI,IAAMkB,EAAU,WCFS,IACtBC,EACAC,EADAD,GAAWE,EAAAA,EAAAA,MACXD,GAAkBE,EAAAA,EAAAA,KAAY,SAAAC,GAAK,OAAIA,EAAMC,WAAWC,iBAE9DC,EAAAA,EAAAA,kBAAgB,WACPN,GACDD,EAASQ,EAAAA,EAAAA,mBAEd,CAACP,EAAiBD,IDJrB,IAAMS,GAAUN,EAAAA,EAAAA,KAAY,SAAAC,GAAK,OAAIA,EAAMC,WAAWI,WAChD/D,EAAUgE,OAAOC,OAAOF,GAASd,MAAK,SAACH,EAAQC,GAAT,OAAoBA,EAAOmB,MAAQpB,EAAOoB,SAChFR,GAAQD,EAAAA,EAAAA,KAAY,SAAAU,GAAC,OAAIA,KAI/B,OAHAC,QAAQC,IAAI,SACZD,QAAQC,IAAIX,IAEL,iBAAKR,UDbmE,SCaxE,WACH,gBAAKA,UAAWiB,EAAhB,UACI,SAACpE,EAAD,CAAeC,QAASA,OAE5B,gBAAKkD,UAAWiB,EAAhB,UACI,SAACjC,EAAD,CAAqBlC,QAASA,OAElC,gBAAKkD,UDpB2L,QCoBhM,UACI,SAACF,EAAD,CAAahD,QAASA,UAKlC","sources":["webpack://d-hondt-calculator-online/./src/misc/get-color-by-index.js","webpack://d-hondt-calculator-online/./src/results/charts/_helpers.js","webpack://d-hondt-calculator-online/./src/results/charts/seats-per-party.js","webpack://d-hondt-calculator-online/./src/misc/seats-formatter.js","webpack://d-hondt-calculator-online/./src/results/charts/difference-from-ideal.js","webpack://d-hondt-calculator-online/./src/results/charts/index.js","webpack://d-hondt-calculator-online/./src/results/explanation/index.js","webpack://d-hondt-calculator-online/./src/results/explanation/styles.scss","webpack://d-hondt-calculator-online/./src/results/styles.scss","webpack://d-hondt-calculator-online/./src/results/index.js","webpack://d-hondt-calculator-online/./src/results/use-update-results.js"],"sourcesContent":["\r\nexport const getColorByIndex = index => {\r\n    const hueAngle = (index * 110) % 360;\r\n\r\n    return `hsl(${hueAngle}, 75%, 60%)`;\r\n}\r\n\r\n","import { neutral } from \"../../_sys.scss\";\r\n\r\nexport const font = {\r\n    weight: 'bold',\r\n    color: neutral,\r\n    size: 16\r\n}","import { Bar } from \"react-chartjs-2\";\r\nimport { neutral } from \"../../_sys.scss\";\r\nimport { getColorByIndex } from \"../../misc\";\r\nimport { font } from \"./_helpers\";\r\n\r\n\r\nexport const SeatsPerParty = ({parties}) => {\r\n    const options = {\r\n        plugins: {\r\n            title: { text: 'Seats per party', display: true, font: font  },\r\n            datalabels: { color: neutral, font: {...font} }\r\n        },\r\n        responsive: true,\r\n        maintainAspectRatio: true,\r\n        aspectRatio: 1,\r\n        x: {\r\n            ticks: {\r\n                font: {...font}\r\n            }\r\n        }\r\n    };\r\n\r\n    const data = {\r\n        labels: parties.map(party => party.name),\r\n        datasets: [{\r\n            label: 'Seats',\r\n            data: parties.map(party => party.seats),\r\n            backgroundColor: parties.map(party => getColorByIndex(party.index)),\r\n        }]\r\n    };\r\n\r\n    return <Bar options={options} data={data} />\r\n}","const simplifynumber = number =>\r\n    parseFloat(Math.abs(number).toFixed(2));\r\n\r\nexport const seatsFormatter = seats => {\r\n    if (seats === 0) {\r\n        return \"No seats gained/lost\";\r\n    } else {\r\n        return `${simplifynumber(seats)} seats ${seats > 0 ? 'gained' : 'lost'}`\r\n    }\r\n}\r\n\r\nexport const seatsFormatterReversed = seats => {\r\n    if (seats === 0) {\r\n        return \"gained/lost no seats\";\r\n    } else {\r\n        return `${seats > 0 ? 'gained' : 'lost'} ${simplifynumber(seats)} seats`\r\n    }\r\n}","import { Bar } from \"react-chartjs-2\";\r\nimport { seatsFormatter } from \"../../misc/seats-formatter\";\r\nimport { neutral, plus, minus } from \"../../_sys.scss\";\r\nimport { font } from \"./_helpers\";\r\n\r\nconst options = {\r\n    plugins: {\r\n        title: { text: 'Difference from ideal number of seats', display: true, font: { weight: 'bold', size: 16 } },\r\n        datalabels: { color: neutral, formatter: seatsFormatter, font: font},\r\n    },\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    aspectRatio: 1,\r\n    indexAxis: 'y',\r\n    scales: {\r\n        y: {\r\n            ticks: {\r\n                font: font\r\n            }\r\n        },\r\n        x: {\r\n            suggestedMin: -0.5,\r\n            suggestedMax: 0.5\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport const DifferenceFromIdeal = ({parties}) => {\r\n    const data = {\r\n        labels: parties.map(party => party.name),\r\n        datasets: [{\r\n            label: `Seats gained or lost due to inaccuracy of D'Hondt method`,\r\n            data: parties.map(party => party.difference),\r\n            backgroundColor: parties.map(party => party.difference > 0 ? plus : minus),\r\n        }]\r\n    }\r\n\r\n    return <Bar options={options} data={data} />\r\n}","import {\r\n    Chart as ChartJS,\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n} from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    ChartDataLabels\r\n);\r\n\r\n\r\nexport * from \"./seats-per-party\";\r\nexport * from \"./difference-from-ideal\";","import { seatsFormatter, seatsFormatterReversed } from \"../../misc\";\r\nimport s from \"./styles.scss\";\r\n\r\nconst greatestAbsoluteDifferenceFromIdeal = (partyA, partyB) => Math.abs(partyB.difference) - Math.abs(partyA.difference);\r\n\r\nexport const Explanation = ({parties}) => {\r\n    const party = parties.sort(greatestAbsoluteDifferenceFromIdeal)[0];\r\n\r\n    return <div className={s.container}>\r\n        <header>\r\n            Seems low?\r\n        </header>\r\n        <div class={s.text}>\r\n            <p>\r\n                Remember, this simulator only shows resuls for a <em>single voting district</em>. \r\n                In a real-world election, typically there will be multiple districts, allowing such discrepancies to accumulate.\r\n            </p>\r\n            <p>\r\n                As an example, in the above simulation for a single district, party {party.name} <strong>{seatsFormatterReversed(party.difference)}</strong>.\r\n            </p>\r\n            <p>\r\n                In a country with 40 voting districts, this would translate to <strong>{seatsFormatter(Math.round(party.difference * 40))}</strong> nationwide.\r\n            </p>\r\n        </div>\r\n    </div>\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"plus\":\"#27ab83\",\"minus\":\"#e12d39\",\"neutral\":\"#1f2933\",\"container\":\"_2J6EJ\",\"text\":\"fWkrf\"};","// extracted by mini-css-extract-plugin\nexport default {\"plus\":\"#27ab83\",\"minus\":\"#e12d39\",\"neutral\":\"#1f2933\",\"container\":\"_2biC3\",\"chart-container\":\"_2QRSt\",\"chartContainer\":\"_2QRSt\",\"explanation-container\":\"Wgzpz\",\"explanationContainer\":\"Wgzpz\"};","import { useUpdateResults } from \"./use-update-results\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { DifferenceFromIdeal, SeatsPerParty } from \"./charts\";\r\nimport { Explanation } from \"./explanation\";\r\nimport s from \"./styles.scss\";\r\n\r\nexport const Results = () => {\r\n    useUpdateResults();\r\n    const results = useSelector(state => state.calculator.results);\r\n    const parties = Object.values(results).sort((partyA, partyB) => partyB.votes - partyA.votes);\r\n    const state = useSelector(s => s);\r\n    console.log('state');\r\n    console.log(state);\r\n\r\n    return <div className={s.container}>\r\n        <div className={s.chartContainer}>\r\n            <SeatsPerParty parties={parties} />\r\n        </div>\r\n        <div className={s.chartContainer}>\r\n            <DifferenceFromIdeal parties={parties} />\r\n        </div>\r\n        <div className={s.explanationContainer}>\r\n            <Explanation parties={parties} />\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Results;","import { useLayoutEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { calculatorActions } from \"../calculator\";\r\n\r\nexport const useUpdateResults = () => {\r\n    const dispatch = useDispatch();\r\n    const areResultsValid = useSelector(state => state.calculator.resultsValid);\r\n\r\n    useLayoutEffect(() => {\r\n        if (!areResultsValid) {\r\n            dispatch(calculatorActions.updateResults());\r\n        }\r\n    }, [areResultsValid, dispatch]);\r\n}"],"names":["getColorByIndex","index","font","weight","color","neutral","size","SeatsPerParty","parties","options","plugins","title","text","display","datalabels","responsive","maintainAspectRatio","aspectRatio","x","ticks","data","labels","map","party","name","datasets","label","seats","backgroundColor","simplifynumber","number","parseFloat","Math","abs","toFixed","seatsFormatter","formatter","indexAxis","scales","y","suggestedMin","suggestedMax","DifferenceFromIdeal","difference","plus","minus","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","ChartDataLabels","greatestAbsoluteDifferenceFromIdeal","partyA","partyB","Explanation","sort","className","class","round","Results","dispatch","areResultsValid","useDispatch","useSelector","state","calculator","resultsValid","useLayoutEffect","calculatorActions","results","Object","values","votes","s","console","log"],"sourceRoot":""}