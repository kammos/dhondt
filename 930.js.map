{"version":3,"file":"930.js","mappings":"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","sources":["webpack://d-hondt-calculator-online/./src/misc/get-color-by-index.js","webpack://d-hondt-calculator-online/./src/misc/title-case.js","webpack://d-hondt-calculator-online/./src/misc/use-id.js","webpack://d-hondt-calculator-online/./src/misc/seats-formatter.js","webpack://d-hondt-calculator-online/./src/prose/index.js","webpack://d-hondt-calculator-online/./src/prose/styles.scss?1793","webpack://d-hondt-calculator-online/./src/_sys.scss?d4c9","webpack://d-hondt-calculator-online/./src/results/charts/_helpers.js","webpack://d-hondt-calculator-online/./src/results/charts/seats-per-party.js","webpack://d-hondt-calculator-online/./src/results/charts/difference-from-ideal.js","webpack://d-hondt-calculator-online/./src/results/charts/index.js","webpack://d-hondt-calculator-online/./src/results/explanation/index.js","webpack://d-hondt-calculator-online/./src/results/explanation/styles.scss?cda5","webpack://d-hondt-calculator-online/./src/results/use-validity-check.js","webpack://d-hondt-calculator-online/./src/results/styles.scss?7cb0","webpack://d-hondt-calculator-online/./src/results/index.js","webpack://d-hondt-calculator-online/./src/results/use-update-results.js","webpack://d-hondt-calculator-online/./src/common.scss?133a"],"sourcesContent":["\r\nexport const getColorByIndex = index => {\r\n    const hueAngle = (index * 110) % 360;\r\n\r\n    return `hsl(${hueAngle}, 75%, 60%)`;\r\n}\r\n\r\n","export const titleCase = name => {\r\n    const splitAndJoined = name.split('-').join(' ');\r\n\r\n    return splitAndJoined.charAt(0).toUpperCase() + splitAndJoined.slice(1);\r\n}","import { useState } from \"react\";\r\n\r\nlet nextId = 0;\r\n\r\nexport const useId = prefix => {\r\n    const [id] = useState(() => `${prefix}-${nextId++}`);\r\n\r\n    return id;\r\n}","const simplifynumber = number =>\r\n    parseFloat(Math.abs(number).toFixed(2));\r\n\r\nexport const seatsFormatter = seats => {\r\n    if (seats === 0) {\r\n        return \"No seats gained/lost\";\r\n    } else {\r\n        return `${simplifynumber(seats)} seats ${seats > 0 ? 'gained' : 'lost'}`\r\n    }\r\n}\r\n\r\nexport const seatsFormatterReversed = seats => {\r\n    if (seats === 0) {\r\n        return \"gained/lost no seats\";\r\n    } else {\r\n        return `${seats > 0 ? 'gained' : 'lost'} ${simplifynumber(seats)} seats`\r\n    }\r\n}","import s from \"./styles.scss\";\r\n\r\nexport const Prose = ({children, className, style, ...rest}) => {\r\n    return <div className={s.prose} {...rest}>\r\n        {children}\r\n    </div>\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"plus\":\"#27ab83\",\"minus\":\"#e12d39\",\"neutral\":\"#1f2933\",\"prose\":\"VvjjZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"plus\":\"#27ab83\",\"minus\":\"#e12d39\",\"neutral\":\"#1f2933\"};","import s from \"../../_sys.scss\";\r\n\r\nexport const font = {\r\n    weight: 'bold',\r\n    color: s.neutral,\r\n    size: 16\r\n}","import { Bar } from \"react-chartjs-2\";\r\nimport { getColorByIndex } from \"../../misc\";\r\nimport { font } from \"./_helpers\";\r\nimport s from \"../../_sys.scss\";\r\n\r\nconst options = {\r\n    plugins: {\r\n        title: { text: 'Seats per party', display: true, font: font  },\r\n        datalabels: { color: s.neutral, font: {...font} }\r\n    },\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    aspectRatio: 1,\r\n    x: {\r\n        ticks: {\r\n            font: {...font}\r\n        }\r\n    }\r\n};\r\n\r\nexport const SeatsPerParty = ({parties}) => {\r\n    const data = {\r\n        labels: parties.map(party => party.name),\r\n        datasets: [{\r\n            label: 'Seats',\r\n            data: parties.map(party => party.seats),\r\n            backgroundColor: parties.map(party => getColorByIndex(party.index)),\r\n        }]\r\n    };\r\n\r\n    const fallbackContent = <>\r\n        {parties.map(party => <p key={party.index}>\r\n            {party.name} - {party.votes} votes;\r\n        </p>)}\r\n    </>\r\n\r\n    return <Bar options={options} data={data} fallbackContent={fallbackContent} />\r\n}","import { Bar } from \"react-chartjs-2\";\r\nimport { seatsFormatter } from \"../../misc/seats-formatter\";\r\nimport { font } from \"./_helpers\";\r\nimport s from \"../../_sys.scss\";\r\n\r\nconst options = {\r\n    plugins: {\r\n        title: { text: 'Difference from ideal number of seats', display: true, font: { weight: 'bold', size: 16 } },\r\n        datalabels: { color: s.neutral, formatter: seatsFormatter, font: font},\r\n    },\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    aspectRatio: 1,\r\n    indexAxis: 'y',\r\n    scales: {\r\n        y: {\r\n            ticks: {\r\n                font: font\r\n            }\r\n        },\r\n        x: {\r\n            suggestedMin: -0.5,\r\n            suggestedMax: 0.5\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport const DifferenceFromIdeal = ({parties}) => {\r\n    const data = {\r\n        labels: parties.map(party => party.name),\r\n        datasets: [{\r\n            label: `Seats gained or lost due to inaccuracy of D'Hondt method`,\r\n            data: parties.map(party => party.difference),\r\n            backgroundColor: parties.map(party => party.difference > 0 ? s.plus : s.minus),\r\n        }]\r\n    }\r\n\r\n    const fallbackContent = <>\r\n        {parties.map(party => <p key={party.index}>\r\n            {party.name} - {seatsFormatter(party.difference)};\r\n        </p>)}\r\n    </>\r\n\r\n    return <Bar options={options} data={data} fallbackContent={fallbackContent}/>\r\n}","import {\r\n    Chart as ChartJS,\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n} from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    ChartDataLabels\r\n);\r\n\r\n\r\nexport * from \"./seats-per-party\";\r\nexport * from \"./difference-from-ideal\";","import { Link } from \"wouter\";\r\nimport { seatsFormatter, seatsFormatterReversed } from \"../../misc\";\r\nimport { Prose } from \"../../prose\";\r\nimport s from \"./styles.scss\";\r\n\r\nconst greatestAbsoluteDifferenceFromIdeal = (partyA, partyB) => \r\n    Math.abs(partyB.difference) - Math.abs(partyA.difference);\r\n\r\nexport const Explanation = ({parties, isDataValid}) => {\r\n    if (!isDataValid) {\r\n        return <Prose>\r\n            <h2 className={s.error}>\r\n                The data you entered is invalid\r\n            </h2>\r\n            <div>\r\n                <p>\r\n                    It seems that some of the data you entered is invalid. Please go back to the <Link href=\"/setyp\">Enter data</Link> tab and correct all fields marked in red.\r\n                </p>\r\n            </div>\r\n        </Prose>\r\n    }\r\n\r\n    if (parties.length === 0) {\r\n        return <Prose>\r\n            <h2>\r\n                It seems that you didn&apos;t enter any parties\r\n            </h2>\r\n            <div>\r\n                <p>\r\n                    To see election results, please go back to the <Link href=\"/setyp\">Enter data</Link> tab and fill in at least one party.\r\n                </p>\r\n            </div>\r\n        </Prose>\r\n    }\r\n\r\n    const party = parties.sort(greatestAbsoluteDifferenceFromIdeal)[0];\r\n\r\n    if (party.difference === 0) {\r\n        return <Prose>\r\n            <h2>\r\n                Wow, no party lost or gained any seats!\r\n            </h2>\r\n            <div>\r\n                <p>\r\n                    Sadly, this is a rare occurence with the D&apos;Hondt method. \r\n                </p>\r\n                <p>\r\n                    Try changing number votes received by each party even just a little.\r\n                </p>\r\n            </div>\r\n        </Prose>\r\n    }\r\n\r\n    return <Prose>\r\n        <h2>\r\n            Seems low?\r\n        </h2>\r\n        <div>\r\n            <p>\r\n                Remember, this simulator only shows resuls for a <em>single voting district</em>. \r\n                In a real-world election, typically there will be multiple districts, allowing such discrepancies to accumulate.\r\n            </p>\r\n            <p>\r\n                As an example, in the above simulation for a single district, party {party.name} <strong>{seatsFormatterReversed(party.difference)}</strong>.\r\n            </p>\r\n            <p>\r\n                In a country with 40 voting districts, this would translate to <strong>{seatsFormatter(Math.round(party.difference * 40))}</strong> nationwide.\r\n            </p>\r\n        </div>\r\n    </Prose>\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"plus\":\"#27ab83\",\"minus\":\"#e12d39\",\"neutral\":\"#1f2933\",\"error\":\"s_RWN\"};","import { useSelector } from \"react-redux\"\r\n\r\nconst isPartyValid = party => \r\n    party.nameError == null && party.votesError == null;\r\n\r\nexport const useValidityCheck = () => {\r\n    const calculator = useSelector(state => state.calculator);\r\n\r\n    return calculator.tresholdError == null && calculator.seatsError == null && Object.values(calculator.parties).every(isPartyValid);\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"plus\":\"#27ab83\",\"minus\":\"#e12d39\",\"neutral\":\"#1f2933\",\"container\":\"Pi8RB\",\"chart-container\":\"xlhqp\",\"chartContainer\":\"xlhqp\",\"explanation-container\":\"LnkIv\",\"explanationContainer\":\"LnkIv\"};","import { useUpdateResults } from \"./use-update-results\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { DifferenceFromIdeal, SeatsPerParty } from \"./charts\";\r\nimport { Explanation } from \"./explanation\";\r\nimport { useValidityCheck } from \"./use-validity-check\";\r\nimport s from \"./styles.scss\";\r\nimport common from \"../common.scss\";\r\n\r\n\r\nexport const Results = () => {\r\n    useUpdateResults();\r\n    const results = useSelector(state => state.calculator.results);\r\n    const parties = Object.values(results).sort((partyA, partyB) => partyB.votes - partyA.votes);\r\n    const hasAnyParties = parties.length !== 0;\r\n    const isDataValid = useValidityCheck();\r\n\r\n    return <div className={s.container}>\r\n        <h1 className={common.srOnly}>Results</h1>\r\n        {isDataValid && hasAnyParties && <>\r\n            <div className={s.chartContainer}>\r\n                <h2 className={common.srOnly}>Seats per party</h2>\r\n                <SeatsPerParty parties={parties} />\r\n            </div>\r\n            <div className={s.chartContainer}>\r\n                <h2 className={common.srOnly}>Seats gained or lost by each party due to inaccuracy of D&apos;Hondt method</h2>\r\n                <DifferenceFromIdeal parties={parties} />\r\n            </div>\r\n        </>}\r\n        <div className={s.explanationContainer}>\r\n            <Explanation parties={parties} isDataValid={isDataValid} />\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Results;","import { useLayoutEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { calculatorActions } from \"../calculator\";\r\n\r\nexport const useUpdateResults = () => {\r\n    const dispatch = useDispatch();\r\n    const areResultsValid = useSelector(state => state.calculator.resultsValid);\r\n\r\n    useLayoutEffect(() => {\r\n        if (!areResultsValid) {\r\n            dispatch(calculatorActions.updateResults());\r\n        }\r\n    }, [areResultsValid, dispatch]);\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"sr-only\":\"OREGa\",\"srOnly\":\"OREGa\"};"],"names":["getColorByIndex","index","titleCase","name","splitAndJoined","split","join","charAt","toUpperCase","slice","nextId","useId","prefix","useState","simplifynumber","number","parseFloat","Math","abs","toFixed","seatsFormatter","seats","seatsFormatterReversed","Prose","children","rest","className","style","font","weight","color","s","size","options","plugins","title","text","display","datalabels","responsive","maintainAspectRatio","aspectRatio","x","ticks","SeatsPerParty","parties","data","labels","map","party","datasets","label","backgroundColor","fallbackContent","votes","formatter","indexAxis","scales","y","suggestedMin","suggestedMax","DifferenceFromIdeal","difference","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","ChartDataLabels","greatestAbsoluteDifferenceFromIdeal","partyA","partyB","Explanation","isDataValid","href","length","sort","round","isPartyValid","nameError","votesError","Results","dispatch","areResultsValid","useDispatch","useSelector","state","calculator","resultsValid","useLayoutEffect","calculatorActions","results","Object","values","hasAnyParties","tresholdError","seatsError","every","useValidityCheck","common"],"sourceRoot":""}